#!/usr/bin/env python
# coding: utf-8

# #### 1) a) O dado fornecido "pr_ceara.txt" contém dados de precipitação mensais para um período de 21 anos. De posse deste dado, construa um gráfico de linha com a série histórica de precipitação para o estado do Ceará.

# In[1]:


import pandas as pd
import matplotlib as plt 
import numpy as np
import seaborn as sns
import matplotlib.pyplot as plt 
from matplotlib.ticker import FuncFormatter
get_ipython().run_line_magic('matplotlib', 'inline')


# In[2]:


dado = np.loadtxt(r'C:/Users/mateu/Desktop/Pro/python_aula/pr_ceara (1).txt')
ano = dado[:,0]
mes = dado[:,1]
pr = dado [:,2]


# In[3]:


print (dado)


# In[4]:


date = pd.date_range('1998-01-01','2019-05-01', freq = 'M').strftime('%m-%Y') 


# In[5]:


plt.figure(figsize = (25,12))
plt.plot (pr,'-b')
plt.xticks(range(0, pr.size, 4), date[::4], rotation = 60)
plt.xlim([range(0, pr.size)[0],range(0, pr.size)[-1]])


# #### b) Quais os problemas que voce indentificou na apresentação do seu dado. Como o gráfico poderia ter sua apresentação melhorada? 

# In[6]:


str = 'o gráfico fica poluido, poderia melhorar trabalhando um intervalo maior'


# #### 2) Com o mesmo arquivo, calcule a média de precipitação para cada ano. Construa um gráfico de barras com a média de cada ano.

# In[7]:


print(dado)


# In[8]:


plotdata = pd.DataFrame({
    "Pre_1998" :[148.37539909,56.844293682,174.7399201,79.946965313,22.2325597758,15.0683688281,11.4826024224,13.0818910596,1.6049471697,2.32260596768,7.41653030935,27.6519545784],
    "Pre_1999" :[117.40468619,136.8691744,212.194775,108.766304,168.6559465,28.682450995,12.5758984896,0.855846327067,6.4708305439,9.019187673,44.1479372634,81.9688057382],
    "Pre_2000" :[155.7027702,209.80240109, 178.87589,297.6276,93.7523570223,71.3448744,82.610600987,49.867637634,48.9516549341,1.78711063801,8.461373244,46.76435357],
    "Pre_2001" :[67.861887461,93.539406,169.12719,209.601356,26.35911985,72.63720308,24.762415567,8.496210979,2.608195513,8.9149449849, 3.801337002,41.780433563],
    "Pre_2002" :[291.92006,95.3925831,173.7952368,205.154715, 117.7608455,68.0376025, 37.0089007424,6.13576239396,8.488432426,2.07583891872,7.247986305,16.229526316],
    "Pre_2003" :[99.10978445,196.6733399, 279.012826,173.287739, 93.937219,76.16535426,8.357789513,9.75028602973,2.293909465,2.501590694,12.524939756,37.93927168],
    "Pre_2004" :[446.356304844,263.073533,162.965104606,112.9482028,60.81798226,99.143154842,44.3667309698,3.872960202,5.249498684,2.1533653,7.42145786,16.3436843997],
    "Pre_2005" :[68.7125116394,58.1581415,201.846780575, 98.869855,119.871718,44.9759799,9.37782414376,4.89705341384,0.586532309563,2.07095556276,1.6994245688,49.6488743401],
    "Pre_2006" :[25.9584394255,147.8857293,197.254046,223.40824,154.917122,66.31035399,9.50588375665,5.59550348124,2.48293973423,8.9187620439,7.03163929931,29.217272765],
    "Pre_2007" :[34.2177010698,273.767395,156.365408,176.391645,68.6704186094,37.49404076,9.13050294528,51.14223221,71.19910091,31.57985844,6.07848134499,55.18292615],
    "Pre_2008" :[139.245804,127.8115681,350.61845,247.3803204,129.056641,36.51929749,26.9368709434,27.37460256,0.876475052208,2.79365893318,3.70502760293,19.8914552957],
    "Pre_2009" :[114.65665266,154.2105041,219.50041,390.61206,261.57939,79.4577685,56.24535982,34.7931698025,5.5871167391,3.24936880679,9.01494901025,16.3917789],
    "Pre_2010" :[107.99206366,36.34456929,85.23638674,173.836278,52.8133117,35.5459927841,11.1398261596,3.18856777433,4.51253901962,53.5743373724,4.30004524844,112.125866304],
    "Pre_2011" :[237.0493672,192.743767,173.589719,214.293234,135.525262618,38.5058916412,52.7612607225,23.17922828,0.96113844301,52.0662162541,16.5151810694,15.516351103],
    "Pre_2012" :[72.9732343218,147.443322018,117.4473681,68.89267902,23.8741897183,36.0886454975,6.88696494131,1.18603697205,2.4145226509,5.04176226427,4.88025803987,7.737721013],
    "Pre_2013" :[51.505750364,65.045128177,72.2927579614,123.4590779,94.00793005,71.4908635729,43.931186526,3.95358221167,2.41113026249,11.0884462399,27.9108867603,28.0545826928],
    "Pre_2014" :[65.2578847,85.0121012,152.6409511,138.7693108,83.11974749,18.0461095613,19.0936081554,1.7622240008,5.82731957727,20.2659332379,29.7630149421,17.8232823516],
    "Pre_2015" :[34.9142400741,103.191612604,201.714718,128.147867,55.462135666,54.3447617712,50.6560529801,2.65397865418,1.94360609904,1.21776663465,0.977489739217,23.9396876709],
    "Pre_2016" :[202.549495,59.620002,136.400110244,104.7987381,47.81063195,22.98812812,4.014685997,0.621150438,2.80462705,2.28685588,2.74586594,28.87077859],
    "Pre_2017" :[76.10715773,168.02788875,215.09172,133.3374213,82.51715548,33.29842386,35.322314924,3.72120134,3.63231936732,7.61230696824,9.94600829,30.5964980128],
    "Pre_2018" :[85.8828042,200.9009036,142.591793,221.116538,64.832697634,6.54984119284,17.924615682,8.06968860794,1.244938864,7.543277505,20.831476256,105.46117481]    
})  


# In[9]:


x_mediapre = plotdata.mean(axis = 0)


# In[10]:


print (x_mediapre)


# In[11]:


from pandas import DataFrame
import matplotlib.pyplot as plt


# In[15]:


data = {'Ano':['1998','1999','2000','2001','2002','2003','2004','2005','2006','2007','2008','2009','2010','2011','2012','2013','2014','2015','2016','2017','2018'],
       'Média de Precipitação':[46.730670,77.300987,103.795719,60.790808,85.770624,82.629504,102.059332,55.059638,73.207161,80.934976,92.684181,112.108211,56.717482,96.058885,41.238892,49.595944,53.115124,54.930326,51.292589,66.600868,73.579146]}        

df = DataFrame(data,columns=['Ano','Média de Precipitação'])
df.plot(x='Ano', y= 'Média de Precipitação', kind = 'bar', color = 'b', figsize=(10,5), title = 'Média de Precipitação no Estado do Ceará durante 20 anos')
plt.show()

